{% extends 'mainapp/profile/base.html' %}

{% block content %}
  <div id=app>
    <h1>Add New Hobbies {{ user }}</h1>
    <div class="full-screen d-flex align-items-center justify-content-center align-content-center text-center flex-column">
      <div class="container">
        <div class="card shadow mx-auto text-left m-3 p-4" style="width: 30rem; height: 30rem; background-color: rgba(242, 240, 240, 0.8)">
            <h5 class="card-title pt-2 pb-4">Search For A Hobbie</h5>
            <div class="table-responsive">
              <table class="table">
                <tbody>
                  <template v-for="(hobby) in hobbies">
                      <tr>
                      <td colspan="3">
                      <a :href="hobby.api">[[ hobby.name ]]</a>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>

        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block scripts %}
  <script>
    let myApp = Vue.createApp({
        delimiters: ["[[", "]]"],
        data() {
          return {
            hobbies: []
          }
        },
        async created() {
          let response = await fetch("{% url 'hobbies api' %}");
          if (response.ok) {
            let data = await response.json();
            this.hobbies = data.hobbies
          } else {
            alert("Failed to load hobbies")
          }
        },
        methods: {
        }
      })
    myApp.mount('#app')
  </script>
{% endblock %}
